<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>First-Person Movement Demo</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
        }
        canvas {
            display: block;
        }
        #gun-image {
    position: fixed;
    bottom: 0px; /* Adjust the distance from the bottom */
    right: 0px; /* Adjust the distance from the right */
    width: 500px; /* Increase the width of the image */
    height: auto; /* Maintain aspect ratio */
    z-index: 9999; /* Ensure the image appears on top of other elements */
}



    </style>
</head>
<body>
    <img src="https://thypix.com/wp-content/uploads/2020/12/call-of-duty-weapons-117.png" id="gun-image">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Set up Three.js scene
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            // Create a cube as our platform
            const platformGeometry = new THREE.BoxGeometry(10, 1, 10);
            const platformMaterial = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
            const platform = new THREE.Mesh(platformGeometry, platformMaterial);
            scene.add(platform);

            // Create a red target
            const targetGeometry = new THREE.BoxGeometry(1, 1, 1);
            const targetMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });
            const target = new THREE.Mesh(targetGeometry, targetMaterial);
            scene.add(target);

            // Position the target
            target.position.set(0, 2, -5); // Adjust the position as needed

            // Add lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.5);
            scene.add(ambientLight);

            // Initialize camera position
            camera.position.set(0, 1.5, 5);

            // Initialize mouse movement variables
            let isDragging = false;
            let previousMouseX = 0;

            // Keyboard state
            const keyboardState = {
                'w': false,
                's': false,
                'a': false,
                'd': false
            };

            // Keyboard event listeners
            document.addEventListener('keydown', handleKeyDown);
            document.addEventListener('keyup', handleKeyUp);

            // Handle mouse movement for turning
            document.addEventListener('mousedown', handleMouseDown);
            document.addEventListener('mousemove', handleMouseMove);
            document.addEventListener('mouseup', handleMouseUp);

            // Prevent default context menu
            document.addEventListener('contextmenu', function(event) {
                event.preventDefault();
            });

           




            // Main loop
            function animate() {
                requestAnimationFrame(animate);

                // Update camera position based on user input
                const movementSpeed = 0.1;

                // Move forward/backward and left/right relative to camera orientation
                const forward = new THREE.Vector3(0, 0, -1).applyQuaternion(camera.quaternion);
                const right = new THREE.Vector3(1, 0, 0).applyQuaternion(camera.quaternion);

                if (keyboardState['w']) camera.position.add(forward.clone().multiplyScalar(movementSpeed));
                if (keyboardState['s']) camera.position.add(forward.clone().multiplyScalar(-movementSpeed));
                if (keyboardState['a']) camera.position.add(right.clone().multiplyScalar(-movementSpeed));
                if (keyboardState['d']) camera.position.add(right.clone().multiplyScalar(movementSpeed));

                renderer.render(scene, camera);
            }

            animate();

            // Event handlers
            function handleKeyDown(event) {
                if (event.key in keyboardState) {
                    keyboardState[event.key] = true;
                }
            }

            function handleKeyUp(event) {
                if (event.key in keyboardState) {
                    keyboardState[event.key] = false;
                }
            }

            function handleMouseDown(event) {
                if (event.button === 2) { // Check if right mouse button is clicked
                    isDragging = true;
                    previousMouseX = event.clientX;
                }
            }

            function handleMouseMove(event) {
                if (!isDragging) return;
                const delta = event.clientX - previousMouseX;
                camera.rotation.y += (delta * 0.01);
                previousMouseX = event.clientX;
            }

            function handleMouseUp(event) {
                if (event.button === 2) { // Check if right mouse button is released
                    isDragging = false;
                    event.preventDefault(); // Prevent default context menu
                }
            }
        });
    </script>
    
</body>
</html>
